<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>MCBuild Documentation - Installation</title>
    <link rel="stylesheet" href="styles.css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body>

    <a name="top">
    <a href="index.html">Table of Contents</a> |
    <a href="intro.html">Previous: Introduction</a> |
    <a href="interface.html">Next: Interface</a>
    <hr>

    <h1>Installation</h1>

    <ul>
      <li><a href="#inst_platform">Platform requirements</a></li>
      <li><a href="#inst_windows_prebuilt">Installation Procedure on Windows (precompiled package)</a></li>
      <li><a href="#inst_windows_manual">Installation Procedure on Windows (manual)</a></li>
      <li><a href="#inst_linux_manual">Installation Procedure on Linux (manual)</a></li>
      <li><a href="#inst_mcbuild">Compiling MCBuild</a></li>
      <li><a href="#inst_run">Running MCBuild</a></li>
    </ul>

    <a name="inst_platform">
    <h2>Supported Platforms</h2>

    <p>Currently 64-bit Linux and Windows are supported. Windows version
      uses Cygwin to simulate a POSIX-compatible environment and uses
      exactly the same source code and compiled the same way as the
      Linux version.</p>

    <p>32-bit platforms should work as well, but that wasn't tested
      for a long time, so I cannot confirm that. Other architectures
      (e.g. ARM on Raspberry Pie) should also work, but that wasn't
      tested - feel free to try.</p>

    <p>What about OSX? Good question. OSX is UNIX-based and all the
      necessary tools and libraries are available - it should just work
      if you install GCC and other tools, essentialy following the Linux
      installation instructions. Unfortunately I have no experience with
      OSX and no possibility to test it. If someone's willing to
      volunteer to test the installation procedure and create an
      installation guide, I would gladly add it to the documentation.</p>

    <p>MCBuild is written completely in C, so it's very fast and lightweight.
      You should be able to run it even on low-end hardware.</p>

    <p>Building it involves only a few standard tools and libraries, which
      are easy set up on any Linux distribution or in Cygwin. I am
      also providing a prebuilt package for Windows, which is probably
      the most convenient choice for most users.</p>

    <p>Follow one of the three sections below that suits you best.</p>


    <a name="inst_windows_prebuilt">
    <h2>Installation Procedure on Windows (precompiled package)</h2>

    <p>Download the package from the link provided on the forums and
      unpack it to your C:\ drive. At the end, you should have a C:\cygwin64
      directory with a bunch of other files and directories in it.</p>

    <p>In the C:\cygwin64 directory, launch the cygwin.bat file.
      On the first launch you will see a bunch of files being copied -
      this is your home directory being set up. After that, you will
      get a shell prompt.</p>

    <p>Now you can proceed with the section <a href="#inst_client">
        Configuring Your Minecraft Client.</a></p>



    <a name="inst_windows_manual">
    <h2>Installation Procedure on Windows (manual)</h2>

    <p>Download and launch the <a href="https://cygwin.com/setup-x86_64.exe">
      Cygwin 64-bit installer.</a>. During installation wizard, make
      sure to select a mirror location close to you. Leave other settings
      as they are.</p>

    <p>When you reach the package manager screen, select following
      additional packages to be installed:</p>

    <ul>
      <li>Libs/libcurl-devel</li>
      <li>Libs/zlib-devel</li>
      <li>Libs/libpng-devel</li>
      <li>Libs/libisl10</li>
      <li>Libs/libcloog-isl4</li>
      <li>Devel/openssl-devel</li>
      <li>Devel/git</li>
      <li>Devel/gcc-core</li>
      <li>Devel/make</li>
      <li>Devel/makedepend</li>
      <li>Archive/unzip</li>
      <li>Archive/zip</li>
      <li>Editors/hexedit</li>
    </ul>

    <p>The simplest way to locate them, is to type the name of the
      package (e.g. "libcurl-devel" into the search bar, then select
      the package under correct folder. Note that there are packages
      with similar names located in the same or different folders -
      make sure to select the right one!</p>

    <p>To select a package for install, click on the "Skip" next to
      its name - it should then change to the version number Cygwin
      is going to install.</p>

    <p>After you selected all the packages, confirm everything and
      let it install. In case you missed something, you can always
      launch the installer again - it will recognize the current
      installation and what packets were already installed.</p>

    <p>Now you can launch the shell in C:\cygwin64\cygwin.bat or
      from the shortcut installed on your desktop.</p>

    <p>Now you should have all necessary tools and libraries, but
      you still need to install MCBuild. You can proceed with the
      <a href="#inst_mcbuild">manual MCBuild installation</a>, which
      is essentially identical on Windows and Linux.</p>


    <a name="inst_linux_manual">
    <h2>Installation Procedure on Linux (manual)</h2>

    <p>You need to install following tools and libraries.
      The exact names of the packages and how do you install
      them may differ from distro to distro, but all of them
      should be available on any decent Linux distro. Refer to your
      package manager.</p>

    <p>For the libraries, make sure to install a package containing
      the files necessary for the development, i.e. header files
      etc. Typically these packages are are identified by <i>-devel</i>
      suffix. I.e. on Ubuntu you would typically have libpng package
      already installed, but you need libpng-devel in order to compile
      MCBuild.</p>

    <ul>
      <li>Tools</li>
        <ul>
          <li>gcc</li>
          <li>gmake</li>
          <li>bash</li>
          <li>git</li>
          <li>gawk</li>
          <li>makedepend</li>
          <li>zip</li>
          <li>unzip</li>
        </ul>
      <li>Libraries</li>
        <ul>
          <li>libcurl</li>
          <li>openssl</li>
          <li>zlib</li>
          <li>libpng</li>
        </ul>
    </ul>

    <a name="inst_mcbuild">
    <h2>Compiling MCBuild</h2>

    <p>At this point, you should have all the prerequisities installed
      and the procedure will be identical for Windows or Linux installation
      from scratch. We assume that MCBuild and libhelper (a library used by
      it) will be installed into your home directory.</p>

    <p>Clone and compile libhelper and MCBuild sources:</p>

    <div class="shell"><pre>
cd
git clone https://github.com/broese/libhelper.git
cd libhelper
make

cd
git clone https://github.com/broese/mcbuild.git
cd mcbuild
make
make install
      </pre></div>

    <p>If everything went fine, you should now have mcproxy application in that
      directory (mcproxy.exe on Cygwin) - the actual proxy/client and a couple
      of other auxiliary applications like mcpdump which we will describe later.
      Now MCBuild should be ready to use. Proceed with the next section
      to configure your Minecraft client.</p>

    <a name="inst_client">
    <h2>Configuring your Minecraft Client for Use with MCBuild</h2>

    <p>For your convenience, I've provided a bunch of scripts to assist you
      with the setup. You can execute them at the shell prompt (Linux or
      Cygwin). Before continuing, you should make sure that MCBuild is
      updated to the newest version:</p>

<div class="shell"><pre>
mcb_update
</pre></div>

    <p>If you happen to have installed Minecraft just now, and have never
      ran it before (on this user account), please launch it, login into
      your account and into some server at least once before proceeding.
      This is necessary so your Minecraft directory (<i>%APPDATA%/.minecraft</i>
      on Windows or <i>~/.minecraft</i> on Linux) is set up.</p>

    <p>Before MCBuild can be used with your client, we need to patch a few
      things in your Minecraft directory, so your client will be able to
      connect through MCBuild. Specifically, we need to redirect the
      three-way authentication process when you're joining a server
      through MCBuild.</p>

<div class="shell"><pre>
mcb_install
</pre></div>

    <p>After running <i>mcb_install</i>, your Minecraft directory is patched
      for use with MCBuild. This needs to be done only once before using
      MCBuild for the first time, or after restoring your Minecraft directory
      to original state. It won't do any harm to run it when your Minecraft
      is already patched however.</p>

    <p>This patch affects a library in your Minecraft directory and not the
      actual client, so mcb_install is typically not required again if your
      client gets an update, or if you install any mods or a custom client.</p>

    <p>Note that once your Minecraft directory is patched, you will be only
      able to connect through MCBuild! If you want to use your Minecraft client
      without MCBuild, you need to remove the patch first:</p>

<div class="shell"><pre>
mcb_remove
</pre></div>

    <p>Finally, you need to add a new entry to your multiplayer server list,
      through which you will be accessing MCBuild. Use address 127.0.0.1</p>

    <img src="images/server_list.png">

    <p>Now you are ready to launch MCBuild.</p>

    <a name="inst_run">
    <h2>Running MCBuild</h2>

    <p>You can launch MCBuild from the shell prompt, using</p>

<div class="shell"><pre>
mcb_start
</pre></div>

    <p>When launched without parameters, MCBuild will connect to 2b2t.org.
      To connect to any other server, write the address as a parameter:</p>


<div class="shell"><pre>
mcb_start mc.example.com
</pre></div>

- If your server uses a different port number than the default 25565,
you can specify that as well:

<div class="shell"><pre>
mcb_start mc.example.com:12345
</pre></div>

    <p>Now you should be able to connect to your server through MCBuild, by
      accessing the server list entry we defined before.</p>

    <p>If everything goes well and you're logged in, you can do a quick test
      to verify MCBuild really works by typing in chat:</p>

<div class="shell"><pre>
#test
</pre></div>

    <p>You should see a response from MCBuild. Voila! You're ready to go!</p>

    <p>For the further instructions, refer to the documentation located in
      the docs folder. If you're using Windows version, it should be located at
      <i>c:\cygwin64\home\YOURNAME\mcbuild\docs\index.html</i> and on Linux
      <i>~/mcbuild/docs/index.html</i></p>

    <hr>
    <a href="#top">Top of page</a> |
    <a href="index.html">Table of Contents</a> |
    <a href="intro.html">Previous: Introduction</a> |
    <a href="interface.html">Next: Interface</a>

  </body>
</html>
